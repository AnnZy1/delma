# 分页功能修复验证用例

## 1. 验证目标
确认所有模块的分页功能均正常工作，具体表现为：
1. **每页条数控制**：选择"10条/页"时，列表中最多显示10条数据，而非全部数据。
2. **翻页功能**：点击第二页时，显示下一页的数据，而非重复第一页数据或显示错误数据。
3. **分页条显示**：分页组件应正确显示总记录数（Total），而非当前页的记录数。

## 2. 验证步骤

### 2.1 员工管理 (重点验证)
1. 访问 **员工管理** 页面 (`/employee`)。
2. 观察默认列表：
   - 确认每页显示条数（默认应该是10条）。
   - 如果总数据量超过10条，确认列表只显示了10条。
3. 修改每页条数：
   - 在分页栏切换为 "20条/页"。
   - 确认列表刷新，显示更多数据（如果有）。
4. 翻页测试：
   - 点击 "第2页"。
   - 确认显示的员工数据与第1页不同。
   - 确认网络请求中 `pageNum=2` 且响应数据正确。

### 2.2 菜品管理 (重点验证)
1. 访问 **菜品管理** 页面 (`/dish`)。
2. 观察默认列表：
   - 确认列表只显示第一页的数据（例如10条）。
   - **关键检查**：之前此处显示了30条（全部数据），现在应严格限制为10条。
3. 翻页测试：
   - 点击 "第2页"。
   - 确认显示的是后续的菜品数据。

### 2.3 分店管理
1. 访问 **分店管理** 页面 (`/branch`)。
2. 验证每页条数限制是否生效。
3. 验证翻页是否正常。

### 2.4 日志管理
1. 访问 **系统管理 -> 登录日志**。
2. 验证分页是否生效（特别是当使用了搜索条件如"员工姓名"时）。

## 3. 技术修复说明
**问题根源**：
后端代码中，`PageHelper.startPage()` 方法调用后，紧接着执行了非主查询的数据库操作（如权限检查中的 `selectById`），导致分页参数被这些中间查询“消费”掉，从而使真正的主列表查询（`selectList`）变成了全表扫描。

**修复方案**：
将所有模块中的 `PageHelper.startPage()` 调用移动到紧邻主查询语句（`selectList`）之前，确保中间没有任何其他数据库操作干扰。

**涉及模块**：
- 员工管理 (`EmployeeServiceImpl`) - **已修复**
- 菜品管理 (`DishServiceImpl`) - **已修复**
- 分店管理 (`BranchServiceImpl`) - **已修复**
- 登录日志 (`LogServiceImpl`) - **已修复**
- (其他模块经检查无此问题)
