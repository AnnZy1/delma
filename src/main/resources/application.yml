server:
  port: 8080
  servlet:
    context-path: /api

spring:
  application:
    name: deliver-management
  
  # 数据源配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/deliver_management
    username: root
    password: 20050721
  
  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 5MB
      max-request-size: 10MB

# MyBatis-Plus 配置
mybatis-plus:
  configuration:
    # 开启驼峰命名转换
    map-underscore-to-camel-case: true
    # 日志实现
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      # 主键类型：AUTO-数据库自增
      id-type: AUTO
      # 逻辑删除字段
      logic-delete-field: isDeleted
      # 逻辑删除值（已删除）
      logic-delete-value: 1
      # 逻辑未删除值（未删除）
      logic-not-delete-value: 0
  # Mapper XML 文件位置
  mapper-locations: classpath:mapper/*.xml
  # 实体类包路径
  type-aliases-package: com.delivery.management.entity

# PageHelper 分页插件配置
pagehelper:
  helper-dialect: mysql
  reasonable: true
  support-methods-arguments: true
  params: count=countSql

# JWT 配置
delivery:
  jwt:
    # JWT 密钥（生产环境请修改为复杂密钥）
    secret-key: deliveryManagementSecretKey2025SuperSecureKey123
    # Token 过期时间（单位：毫秒，默认 2 小时）
    ttl: 7200000
    # Token 前缀
    token-prefix: "Bearer "
    # Token 请求头名称
    token-header-name: Authorization

# 阿里云 OSS 配置
aliyun:
  oss:
    # OSS 服务端点
    endpoint: https://oss-cn-beijing.aliyuncs.com
    # OSS AccessKeyId（从环境变量读取）
    access-key-id: ${OSS_ACCESS_KEY_ID:}
    # OSS AccessKeySecret（从环境变量读取）
    access-key-secret: ${OSS_ACCESS_KEY_SECRET:}
    # OSS 存储桶名称
    bucket-name: deliver-management
    # OSS 文件访问域名
    domain: https://deliver-management.oss-cn-beijing.aliyuncs.com

# Knife4j (Swagger) 配置
knife4j:
  enable: true
  openapi:
    title: 外卖管理系统 API 文档
    description: 外卖管理系统后端接口文档
    version: 1.0.0
    contact:
      name: 开发团队
      email: dev@example.com
    # 服务地址
    servers:
      - url: http://localhost:8721/api
        description: 开发环境
      - url: https://prod-domain.com/api
        description: 生产环境

# 日志配置
logging:
  level:
    root: INFO
    com.delivery.management: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{50} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{50} - %msg%n"
  file:
    name: ./logs/deliver-management.log
    max-size: 10MB
    max-history: 30